# Компилятор и флаги
CC = gcc
CXXFLAGS = -std=c++17 -Wall -x c++

# Целевой файл
TARGET = main.exe

# Директории
SRCDIR = .
EXAMPLEDIR = example
UTILSDIR = utils

# Исходники и заголовки
SOURCES = \
  $(SRCDIR)/main.cpp \
  $(EXAMPLEDIR)/example.cpp \
  $(UTILSDIR)/utils.cpp

OBJECTS = $(SOURCES:.cpp=.o)
HEADERS = \
  $(EXAMPLEDIR)/example.hpp \
  $(UTILSDIR)/utils.hpp

# Правило сборки
$(TARGET): $(OBJECTS)
  $(CC) $(CXXFLAGS) -o $@ $(OBJECTS)

# Правило для сборки объектов
%.o: %.cpp $(HEADERS)
  $(CC) $(CXXFLAGS) -c $< -o $@

# Удаление сгенерированных файлов
.PHONY: clean
clean:
  rm -f $(OBJECTS) $(TARGET)

# Информация о сборке
.PHONY: info
info:
  @echo "Компилятор: $(CC)"
  @echo "Флаги компиляции: $(CXXFLAGS)"
  @echo "Исходные файлы: $(SOURCES)"
  @echo "Заголовочные файлы: $(HEADERS)"
